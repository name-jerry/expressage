import{_ as y,o as N,c as v,b as w,u as C,f as S,g as x,i as V,h as _,j as k,k as H,E as P,d as u,w as m,l as s,F as W,M as c,m as B,e as f,n as I}from"./index.9c5ce7c4.js";const T={name:"SIdentify",props:{code:{type:String,default:"1234"},fontSizeMin:{type:Number,default:30},fontSizeMax:{type:Number,default:35},backgroundColorMin:{type:Number,default:100},backgroundColorMax:{type:Number,default:150},colorMin:{type:Number,default:0},colorMax:{type:Number,default:10},lineColorMin:{type:Number,default:100},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:100},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:112},contentHeight:{type:Number,default:38}},methods:{randomNum(e,t){return Math.floor(Math.random()*(t-e)+e)},randomColor(e,t){var a=this.randomNum(e,t),i=this.randomNum(e,t),o=this.randomNum(e,t);return"rgb("+a+","+i+","+o+")"},drawPic(){var e=document.getElementById("s-canvas"),t=e.getContext("2d");t.textBaseline="bottom",t.fillStyle=this.randomColor(this.backgroundColorMin,this.backgroundColorMax),t.fillRect(0,0,this.contentWidth,this.contentHeight);for(let a=0;a<this.code.length;a++)this.drawText(t,this.code[a],a);this.drawLine(t),this.drawDot(t)},drawText(e,t,a){e.fillStyle=this.randomColor(this.colorMin,this.colorMax),e.font=this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px SimHei";var i=(a+1)*(this.contentWidth/(this.code.length+1)),o=this.randomNum(this.fontSizeMax,this.contentHeight-5),n=this.randomNum(-30,30);e.save(),e.translate(i,o),e.rotate(n*Math.PI/180),e.fillText(t,0,0),e.restore()},drawLine(e){for(let t=0;t<8;t++)e.strokeStyle=this.randomColor(this.lineColorMin,this.lineColorMax),e.beginPath(),e.moveTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.lineTo(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight)),e.stroke()},drawDot(e){for(let t=0;t<100;t++)e.fillStyle=this.randomColor(0,255),e.beginPath(),e.arc(this.randomNum(0,this.contentWidth),this.randomNum(0,this.contentHeight),1,0,2*Math.PI),e.fill()}},watch:{code(){this.drawPic()}},mounted(){this.drawPic()}},z={class:"s-canvas"},E=["width","height"];function $(e,t,a,i,o,n){return N(),v("div",z,[w("canvas",{id:"s-canvas",width:a.contentWidth,height:a.contentHeight},null,8,E)])}const L=y(T,[["render",$]]);const R=f("\u8D26\u53F7:"),U=f("\u5BC6\u7801:"),j=f("\u9A8C\u8BC1\u7801:"),D=f("\u767B\u5F55"),F={__name:"login",setup(e){let t=C();const a=S();x();let i=V("url");_(!1);let o=k({}),n=_(""),g=_("abcde1323");h();function h(){n.value="";for(let r=0;r<4;r++)n.value+=g.value[Math.floor(Math.random()*g.value.length)]}function M(){if(!o.userName||!o.password||!o.verify)return h(),c("\u8BF7\u8F93\u5165\u5B8C\u6574");if(n.value!=o.verify)return h(),c({message:"\u9A8C\u8BC1\u7801\u6709\u8BEF",type:"warning"});B(I)({url:i+"/user/login",method:"post",data:o}).then(r=>{if(console.log("res"+JSON.stringify(r.data)),r.data.errcode==0)return t.login=!0,t.user.userName=o.userName,a.push("/list"),c({message:"\u767B\u5F55\u6210\u529F",type:"success"});c(r.data.errmsg)})}return(r,l)=>{const p=H,b=P;return N(),v(W,null,[u(p,{modelValue:s(o).userName,"onUpdate:modelValue":l[0]||(l[0]=d=>s(o).userName=d),placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"},{prepend:m(()=>[R]),_:1},8,["modelValue"]),u(p,{modelValue:s(o).password,"onUpdate:modelValue":l[1]||(l[1]=d=>s(o).password=d),type:"password","show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},{prepend:m(()=>[U]),_:1},8,["modelValue"]),u(p,{modelValue:s(o).verify,"onUpdate:modelValue":l[2]||(l[2]=d=>s(o).verify=d),placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",style:{flex:"1 0 50%"}},{prepend:m(()=>[j]),_:1},8,["modelValue"]),u(L,{code:s(n),onClick:h},null,8,["code"]),u(b,{type:"success",plain:"",onClick:M},{default:m(()=>[D]),_:1})],64)}}},O=y(F,[["__scopeId","data-v-014ad5d0"]]);export{O as default};
